/*
jCountdown Plugin for jQuery JavaScript Library

http://codecanyon.net/user/ufoufoufo

Copyright (c) 2012
*/
jQuery.fn.extend({jCountdown:function(){var y=function(b){this._target=b;this._width=50;this._height=64;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(a){if(a){this.frame(1);this.stop();var b=this;this._intervalId=setInterval(function(){b.frame()==b.totalFrames()?(clearInterval(b._intervalId),b.onFinish()):b.frame(b.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())}; this.value=function(a,b){if(void 0==a)return this._value;this._value=a;this.update(b)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(a){if(void 0==a)return this._width;this._width=a};this.height=function(a){if(void 0==a)return this._height;this._height=a};this.frame=function(a){if(void 0==a)return this._frame;this._frame=a;var a=-(9-this.value())*this.width(),b=-(this.frame()-1)*this.height();this._target.children(".text").css("background-position", a+"px "+b+"px")};this.totalFrames=function(a){if(void 0==a)return this._totalFrames;this._totalFrames=a};this.fps=function(a){if(void 0==a)return this._fps;this._fps=a};this.update(!1)},z=function(b){this._target=b;this._width=50;this._height=64;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(a){if(a){this.frame(1);this.stop();var b=this;this._intervalId=setInterval(function(){b.frame()==b.totalFrames()? (clearInterval(b._intervalId),b.onFinish()):b.frame(b.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(a,b){if(void 0==a)return this._value;this._value=a;this.update(b)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(a){if(void 0==a)return this._width;this._width=a};this.height=function(a){if(void 0==a)return this._height;this._height=a};this.frame=function(a){if(void 0==a)return this._frame;this._frame= a;a=-((1+this.value())*this.height())+Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2)*this.height();this._target.children(".text").css("background-position","0px "+a+"px")};this.totalFrames=function(a){if(void 0==a)return this._totalFrames;this._totalFrames=a};this.fps=function(a){if(void 0==a)return this._fps;this._fps=a};this.update(!1)},A=function(b){this._target=b;this._height=this._width=60;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop= function(){clearInterval(this._intervalId)};this.update=function(a){if(a){this.frame(1);this.stop();var b=this;this._intervalId=setInterval(function(){b.frame()==b.totalFrames()?(clearInterval(b._intervalId),b.onFinish()):b.frame(b.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(a,b){if(void 0==a)return this._value;this._value=a;this.update(b)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(a){if(void 0== a)return this._width;this._width=a};this.height=function(a){if(void 0==a)return this._height;this._height=a};this.frame=function(a){if(void 0==a)return this._frame;this._frame=a;a=this.value()+1;9<a&&(a=0);var b=this.frame()/this.totalFrames(),c;0.4<=b&&0.6>=b?c=0:0.4>=b?c=1-b/0.4:0.6<=b&&(c=(b-0.6)/0.4);a=-(0.5<b?this.value():a)*this.height();a-=2*(1-c);this._target.children(".text").css("background-position","0px "+a+"px").css("opacity",c);this._target.children(".cover").css("opacity",c)};this.totalFrames= function(a){if(void 0==a)return this._totalFrames;this._totalFrames=a};this.fps=function(a){if(void 0==a)return this._fps;this._fps=a};this.update(!1)},B=function(b){this._target=b;this._height=this._width=60;this._frame=1;this._totalFrames=15;this._fps=24;this._intervalId=-1;this._value=0;this.stop=function(){clearInterval(this._intervalId)};this.update=function(a){if(a){this.frame(1);this.stop();var b=this;this._intervalId=setInterval(function(){b.frame()==b.totalFrames()?(clearInterval(b._intervalId), b.onFinish()):b.frame(b.frame()+1)},Math.ceil(1E3/this.fps()))}else this.frame(this.totalFrames())};this.value=function(a,b){if(void 0==a)return this._value;this._value=a;this.update(b)};this.onFinish=function(){};this.destroy=function(){this.stop();this._target=null};this.width=function(a){if(void 0==a)return this._width;this._width=a};this.height=function(a){if(void 0==a)return this._height;this._height=a};this.frame=function(a){if(void 0==a)return this._frame;this._frame=a;var a=-this.value()* this.height(),b=Math.sin((this.frame()-1)/(this.totalFrames()-1)*Math.PI/2);0<b&&0.001>b?b=0:0>b&&-0.001<b&&(b=0);this._target.children(".text").css("background-position","0px "+a+"px").css("opacity",b)};this.totalFrames=function(a){if(void 0==a)return this._totalFrames;this._totalFrames=a};this.fps=function(a){if(void 0==a)return this._fps;this._fps=a};this.update(!1)},v=function(){this._days=[];this._hours=[];this._minutes=[];this._seconds=[];this._tickId=-1;this._tickDelay=100;this._timeText=""; this._timeZone=0;this._time=null;this.checkTime=function(b){var a=new Date;if(this._time.getTime()<a.getTime()+6E4*a.getTimezoneOffset()){for(a=0;a<this._days.length;a++)this._days[a].value(0);for(a=0;a<this._hours.length;a++)this._hours[a].value(0);for(a=0;a<this._minutes.length;a++)this._minutes[a].value(0);for(a=0;a<this._seconds.length;a++)this._seconds[a].value(0);this.stop();this.onFinish();return!0}var c=this.timeFormat(this._time.getTime()-(a.getTime()+6E4*a.getTimezoneOffset()),this._days.length, this._hours.length,this._minutes.length,this._seconds.length).split("");if(!isNaN(this._time)){for(a=0;a<this._days.length;a++){var d=parseInt(c.shift());d!=this._days[a].value()&&this._days[a].value(d,b)}for(a=0;a<this._hours.length;a++)d=parseInt(c.shift()),d!=this._hours[a].value()&&this._hours[a].value(d,b);for(a=0;a<this._minutes.length;a++)d=parseInt(c.shift()),d!=this._minutes[a].value()&&this._minutes[a].value(d,b);for(a=0;a<this._seconds.length;a++)d=parseInt(c.shift()),d!=this._seconds[a].value()&& this._seconds[a].value(d,b)}return!1};this.textFormat=function(b,a,c){for(b=b.toString();b.length<a;)b=c+b;b.length>a&&(b=b.substr(b.length-a,a));return b};this.timeFormat=function(b,a,c,d,e){var b=Math.floor(b/1E3),f=b%60,g=Math.floor(b%3600/60),h=Math.floor(b%86400/3600);return this.textFormat(Math.floor(b/86400),a,"0")+this.textFormat(h,c,"0")+this.textFormat(g,d,"0")+this.textFormat(f,e,"0")};this.start=function(){this.stop();for(var b=0;b<this._days.length;b++)this._days[b].update();for(b=0;b< this._hours.length;b++)this._hours[b].update();for(b=0;b<this._minutes.length;b++)this._minutes[b].update();for(b=0;b<this._seconds.length;b++)this._seconds[b].update();if(!this.checkTime(!1)){var a=this;this._tickId=setInterval(function(){a.checkTime(!0)},this._tickDelay)}};this.stop=function(){for(var b=0;b<this._days.length;b++)this._days[b].stop();for(b=0;b<this._hours.length;b++)this._hours[b].stop();for(b=0;b<this._minutes.length;b++)this._minutes[b].stop();for(b=0;b<this._seconds.length;b++)this._seconds[b].stop(); clearInterval(this._tickId)};this.onFinish=function(){};this.destroy=function(){for(var b=0;b<this._days.length;b++)this._days[b].destroy();for(b=0;b<this._hours.length;b++)this._hours[b].destroy();for(b=0;b<this._minutes.length;b++)this._minutes[b].destroy();for(b=0;b<this._seconds.length;b++)this._seconds[b].destroy();this._days=[];this._hours=[];this._minutes=[];this._seconds=[];this.stop()};this.items=function(b,a,c,d){this._days=b;this._hours=a;this._minutes=c;this._seconds=d};this.timeText= function(b){if(void 0==b)return this._timeText;this._timeText=b;this.time(this.timeText(),this.timeZone())};this.timeZone=function(b){if(void 0==b)return this._timeZone;this._timeZone=b;this.time(this.timeText(),this.timeZone())};this.time=function(b,a){this._timeText=b;this._timeZone=a;var c=this._timeText.split("/").join(" ").split(":").join(" ").split(" "),d=parseInt(c[0]),e=parseInt(c[1])-1,f=parseInt(c[2]),g=parseInt(c[3]),h=parseInt(c[4])-60*this._timeZone,c=parseInt(c[5]);this._time=new Date(d, e,f,g,h,c,0);this.start()}},s=function(){return l.data("countdown")},p=function(){void 0!=s()&&(s().destroy(),l.removeData("countdown"))};if(0<arguments.length){var l=this,k=s();if(1==arguments.length&&"object"==typeof arguments[0]){void 0!=k&&(p(),l.children().remove());var h=arguments[0];void 0==s()?(k=new v,l.data("countdown",k),k=s()):k=void 0;v="string"==typeof h.timeText?h.timeText:"";p=parseFloat(h.timeZone);isNaN(p)&&(p=0);var j=String(h.style).toLowerCase();switch(j){case "flip":break;case "slide":break; case "crystal":break;case "metal":break;default:j="flip"}var n=String(h.color).toLowerCase();switch(n){case "black":break;case "white":break;default:n="black"}var q=parseInt(h.textGroupSpace);0<=q||(q=15);var r=parseInt(h.textSpace);0<=r||(r=0);var t=!1!=h.reflection,i=parseInt(h.reflectionOpacity);0<=i?100<i&&(i=100):i=10;var e=parseInt(h.reflectionBlur);0<=e?10<e&&(e=10):e=0;var f=2<parseInt(h.dayTextNumber)?parseInt(h.dayTextNumber):2,g=!1!=h.displayDay,x=!1!=h.displayHour,w=!1!=h.displayMinute, u=!1!=h.displaySecond,h="function"==typeof h.onFinish?h.onFinish:function(){},c,d="",m="";c='<div class="jCountdown">';if(g){c+='<div class="group day'+(!x&&!w&&!u?" lastItem":"")+'">';for(g=0;g<f;g++){d=" item"+(g+1);m=g==f-1?" lastItem":"";c+='<div class="container'+d+m+'">';if("slide"==j||"crystal"==j||"metal"==j)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}c+='<div class="label"></div></div>'}if(x){c+='<div class="group hour'+(!w&&!u?" lastItem":"")+'">';for(g=0;2> g;g++){d=" item"+(g+1);m=1==g?" lastItem":"";c+='<div class="container'+d+m+'">';if("slide"==j||"crystal"==j||"metal"==j)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}c+='<div class="label"></div>';c+="</div>"}if(w){c+='<div class="group minute'+(!u?" lastItem":"")+'">';for(g=0;2>g;g++){d=" item"+(g+1);m=1==g?" lastItem":"";c+='<div class="container'+d+m+'">';if("slide"==j||"crystal"==j||"metal"==j)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}c+= '<div class="label"></div>';c+="</div>"}if(u){c+='<div class="group second lastItem">';for(g=0;2>g;g++){d=" item"+(g+1);m=1==g?" lastItem":"";c+='<div class="container'+d+m+'">';if("slide"==j||"crystal"==j||"metal"==j)c+='<div class="cover"></div>';c+='<div class="text"></div>';c+="</div>"}c+='<div class="label"></div>';c+="</div>"}c+="</div>";l.html(c);f=l.children(".jCountdown");f.addClass(j).addClass(n);f.removeClass("flip").removeClass("slide").addClass(j);f.removeClass("black").removeClass("white").addClass(n); f.children(".group").css("margin-right",q+"px");f.children(".group.lastItem").css("margin-right","0px");f.children(".group").children(".container").css("margin-right",r+"px");f.children(".group").children(".container.lastItem").css("margin-right","0px");if(t&&(void 0==jQuery.browser.msie||!1==jQuery.browser.msie))d=f.clone(),d=jQuery("<div>").append(d),d.addClass("reflection"),d.css("opacity",i/100),d.addClass("blur"+e),f.after(d),f=l.find(".jCountdown");i="";e=0;n=[];q=[];r=[];t=[];d=function(){}; switch(j){case "flip":d=y;break;case "slide":d=z;break;case "crystal":d=B;break;case "metal":d=A}e=1;for(i=".group.day>.container.item";f.find(i+e).length;)n.push(new d(f.find(i+e))),e++;e=1;for(i=".group.hour>.container.item";f.find(i+e).length;)q.push(new d(f.find(i+e))),e++;e=1;for(i=".group.minute>.container.item";f.find(i+e).length;)r.push(new d(f.find(i+e))),e++;e=1;for(i=".group.second>.container.item";f.find(i+e).length;)t.push(new d(f.find(i+e))),e++;k.items(n,q,r,t);k.onFinish=h;k.time(v, p)}else if("string"==typeof arguments[0]&&void 0!=k)switch(arguments[0]){case "stop":k.stop();break;case "start":k.start();break;case "destroy":p(),l.children().remove()}}return this}});